<!DOCTYPE html>
<html>
  <head>
    <meta charset="utf-8">
    <title>Roulette.js LT</title>
    <link rel="stylesheet" href="bootstrap.css"></link>
    <link rel="stylesheet" href="http://ajax.googleapis.com/ajax/libs/jqueryui/1.8.14/themes/ui-lightness/jquery-ui.css">
    <link rel="stylesheet" href="bootstrap-responsive.css"></link>
    <link rel="stylesheet" href="http://ajax.googleapis.com/ajax/libs/jqueryui/1.9.0/themes/ui-lightness/jquery-ui.css">
    <link rel="stylesheet" href="demo.css"></link>
  </head>
  <body>
    <div class="container">
      <div class="page-header">
	<h1>
	  Roulette.js サンプル
	</h1>
      </div>
      <div class="roulette_container" >
	<div class="roulette" style="display:none;">
	  <img src="star.png"/>
	  <img src="flower.png"/>
	  <img src="coin.png"/>
	  <img src="mshroom.png"/>
	  <img src="chomp.png"/>
	</div>
      </div>
      <div class="btn_container">
	<p>
	  <button class="btn btn-large btn-primary start"> START </button>
	  <button class="stop btn-large btn btn-warning"> STOP </button>
	</p>
      </div>
    </div>

    <script src="http://ajax.googleapis.com/ajax/libs/jquery/1.8.0/jquery.min.js"></script>
    <script src="http://ajax.googleapis.com/ajax/libs/jqueryui/1.9.0/jquery-ui.min.js"></script>
    <script src="../roulette.js"></script>
    <script>
     jQuery(function(){
       var len = $('.roulette img').length;
       var stopped = [];
       function getStopImageNumber() {
         for (;;) {
           var stopImageNumber = Math.floor((Math.random() * 1000)) % len;
           if (stopped.indexOf(stopImageNumber) === -1) {
             stopped.push(stopImageNumber);
             return stopImageNumber;
           }
         }
       }
       // initialize!
       var option = {
	 speed : 10,
	 duration : 5,
	 stopImageNumber : getStopImageNumber(),
       }
       $('div.roulette').roulette(option);

       // START!
       $('.start').click(function(){
         if (stopped.length === len) {
           location.href = 'http://www.recruit-mp.co.jp/career_engineer/';
           return;
         }
	 $('div.roulette').roulette('start');
       });

       // STOP!
       $('.stop').click(function(){
         option.stopImageNumber = getStopImageNumber();
	 $('div.roulette').roulette('stop', option);
       });
     });

    </script>
  </body>
</html>
